{% load static %}
<!doctype html>
<html lang="en" class="scroll-smooth"
      x-data="{ 
        darkMode: localStorage.getItem('darkMode') === 'true' 
      }"
      x-init="
        // Apply on load
        if (darkMode) { document.documentElement.classList.add('dark'); }
        else { document.documentElement.classList.remove('dark'); }
        
        // Watch for changes
        $watch('darkMode', val => {
          localStorage.setItem('darkMode', val);
          if (val) document.documentElement.classList.add('dark');
          else document.documentElement.classList.remove('dark');
        });
      ">
      <script>
        // On page load, set dark mode if user saved preference
        if (localStorage.getItem('darkMode') === 'true') {
          document.documentElement.classList.add('dark');
        }
      </script>
      
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>{% block title %}Zahraa Portfolio{% endblock %}</title>

    <!-- Tailwind & Custom CSS -->
    <link href="{% static 'css/tailwind.css' %}" rel="stylesheet">
    <link href="{% static 'css/custom.css' %}" rel="stylesheet">

    <!-- Alpine.js & AOS -->
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
  </head>

  <body class="bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 transition-colors duration-300"
        x-data="{ mobileMenuOpen: false, activeSection: 'home' }">

    <!-- Particle Background -->
    <div class="particles" id="particles"></div>

    <!-- Navbar -->
    <nav class="fixed top-0 w-full bg-white/80 dark:bg-gray-900/80 backdrop-blur-md shadow-lg z-50 transition-all duration-300"
         x-data="{ scrolled: false }"
         x-init="window.addEventListener('scroll', () => { scrolled = window.scrollY > 50; })"
         :class="{ 'py-2': scrolled, 'py-4': !scrolled }">
      <div class="max-w-6xl mx-auto px-4 flex justify-between items-center">
        <div class="flex items-center space-x-3">
          <img src="{% static 'images/profile.jpeg' %}" 
               alt="Zahraa" 
               class="w-10 h-10 rounded-full object-cover border-2 border-blue-500 dark:border-purple-400 shadow-md">
          <a href="/" class="text-xl font-bold gradient-text hover:scale-105 transition-transform duration-300">
            Zahraa
          </a>
        </div>
        
        <!-- Mobile Menu Button -->
<div class="md:hidden flex items-center">
  <button @click="mobileMenuOpen = !mobileMenuOpen" 
          class="p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
    <svg class="w-6 h-6 text-gray-700 dark:text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
            d="M4 6h16M4 12h16M4 18h16"/>
    </svg>
  </button>
</div>

        <!-- Desktop Navigation -->
        <div class="hidden md:flex space-x-8">
          <a href="/" class="nav-link text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-300 relative group">
            Home
            <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-blue-600 to-purple-600 group-hover:w-full transition-all duration-300"></span>
          </a>
          <a href="/about/" class="nav-link text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-300 relative group">
            About
            <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-blue-600 to-purple-600 group-hover:w-full transition-all duration-300"></span>
          </a>
          <a href="/projects/" class="nav-link text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-300 relative group">
            Projects
            <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-blue-600 to-purple-600 group-hover:w-full transition-all duration-300"></span>
          </a>
          <a href="/contact/" class="nav-link text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-300 relative group">
            Contact
            <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-blue-600 to-purple-600 group-hover:w-full transition-all duration-300"></span>
          </a>
        </div>

        <div class="flex items-center space-x-4">
          <!-- Dark Mode Toggle -->
<!-- Dark Mode Toggle -->
<button id="theme-toggle" 
        class="p-2 rounded-full bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 transition-all duration-300 hover:scale-110 flex items-center justify-center">
  <!-- Light Mode Icon (Moon) -->
  <svg id="moon-icon" class="w-5 h-5 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
          d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"/>
  </svg>
  <!-- Dark Mode Icon (Sun) -->
  <svg id="sun-icon" class="w-5 h-5 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
          d="M12 3v1m0 16v1m9-9h-1M4 12H3
             m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707
             m12.728 0l-.707.707M6.343 17.657l-.707.707
             M16 12a4 4 0 11-8 0 4 4 0 018 0z"/>
  </svg>
</button>

<script>
  const themeToggle = document.getElementById("theme-toggle");
  const sunIcon = document.getElementById("sun-icon");
  const moonIcon = document.getElementById("moon-icon");

  function updateIcons() {
    if (document.documentElement.classList.contains("dark")) {
      sunIcon.classList.remove("hidden");   // show sun
      moonIcon.classList.add("hidden");     // hide moon
    } else {
      sunIcon.classList.add("hidden");      // hide sun
      moonIcon.classList.remove("hidden");  // show moon
    }
  }

  // Initial load
  updateIcons();

  themeToggle.addEventListener("click", () => {
    const html = document.documentElement;
    const isDark = html.classList.toggle("dark");
    localStorage.setItem("darkMode", isDark);
    updateIcons();
  });
</script>

        
        </div>
      </div>

      <!-- Mobile Navigation -->
      <div x-show="mobileMenuOpen" 
           x-transition:enter="transition ease-out duration-200"
           x-transition:enter-start="opacity-0 transform -translate-y-2"
           x-transition:enter-end="opacity-100 transform translate-y-0"
           x-transition:leave="transition ease-in duration-150"
           x-transition:leave-start="opacity-100 transform translate-y-0"
           x-transition:leave-end="opacity-0 transform -translate-y-2"
           class="md:hidden bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700">
        <div class="px-4 py-2 space-y-2">
          <a href="/" class="block py-2 px-4 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-md transition-colors duration-300">Home</a>
          <a href="/about/" class="block py-2 px-4 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-md transition-colors duration-300">About</a>
          <a href="/projects/" class="block py-2 px-4 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-md transition-colors duration-300">Projects</a>
          <a href="/contact/" class="block py-2 px-4 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-md transition-colors duration-300">Contact</a>
        </div>
      </div>
    </nav>

    <!-- Main Content -->
    <main class="max-w-6xl mx-auto px-4 pt-20">
      {% block content %}{% endblock %}
    </main>

    <!-- Footer -->
    <footer class="bg-gray-100 dark:bg-gray-800 mt-12 transition-colors duration-300">
      <div class="max-w-6xl mx-auto px-4 py-6 text-center text-gray-600 dark:text-gray-400">
        Â© {{ now|date:"Y" }} Zahraa Delbani. All rights reserved.
      </div>
    </footer>

    <!-- Floating Action Button -->
    <button onclick="scrollToTop()" 
            class="fixed bottom-8 right-8 p-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-full shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-110 z-40 floating"
            id="scrollToTop" style="display: none;">
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18"/>
      </svg>
    </button>

    <!-- Scripts -->
    <script src="{% static 'js/main.js' %}"></script>
    <script>
      AOS.init({ duration: 800, easing: 'ease-in-out', once: true, offset: 100 });

      function createParticles() {
        const particlesContainer = document.getElementById('particles');
        const particleCount = 50;
        for (let i = 0; i < particleCount; i++) {
          const particle = document.createElement('div');
          particle.className = 'particle';
          particle.style.left = Math.random() * 100 + '%';
          particle.style.top = Math.random() * 100 + '%';
          particle.style.animationDelay = Math.random() * 6 + 's';
          particle.style.animationDuration = (Math.random() * 3 + 3) + 's';
          particlesContainer.appendChild(particle);
        }
      }

      function scrollToTop() { window.scrollTo({ top: 0, behavior: 'smooth' }); }

      window.addEventListener('scroll', () => {
        const scrollToTopBtn = document.getElementById('scrollToTop');
        scrollToTopBtn.style.display = window.scrollY > 300 ? 'block' : 'none';
      });

      createParticles();
    </script>
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <script src="https://unpkg.com/aos@2.3.4/dist/aos.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        AOS.init({ once: true, duration: 600 });
      });
    </script>
  </body>
</html>
